# Publish

This page describes how to publish your project.  Publishing consists of uploading a descriptor, such as an Ivy file or Maven POM, and artifacts, such as a jar or war, to a repository so that other projects can specify your project as a dependency.

The `publish-local`  action is used to publish your project to a local Ivy repository.  By default, this local repository is in `${user.home}/.ivy2/local`.  You can then use this project from other projects on the same machine.

The `publish` action is used to publish your project to a remote repository.  To use publishing, you need to specify the repository to publish to and the credentials to use.  Once these are set up, you can run `publish`.

## Define the repository

To specify the repository, assign a repository to `publish-to` and optionally set the publishing style.  For example, to upload to Nexus:
```scala
publishTo := Some("Scala Tools Nexus" at "http://nexus.scala-tools.org/content/repositories/releases/")
```

If you're using Maven repositories you will also have to select the right repository depending on your artifacts: SNAPSHOT versions go to the /snapshot repository while other versions go to the /releases repository. Doing this selection can be done by using the value of the `version` SettingKey:

```
publishTo <<= (version) { version: String =>
  val nexus = "http://nexus-direct.scala-tools.org/content/repositories/"
  if (version.trim.endsWith("SNAPSHOT")) Some("snapshots" at nexus+"snapshots/") 
  else                                   Some("releases" at nexus+"releases/")
}
```

## Credentials

There are two ways to specify credentials for such a repository.  The first is to specify them inline:
```scala
credentials += Credentials("Sonatype Nexus Repository Manager", "nexus.scala-tools.org", "admin", "admin123")
```

The second and better way is to load them from a file, for example:
```scala
credentials += Credentials(Path.userHome / ".ivy2" / ".credentials")
```

The credentials file is a properties file with keys `realm`, `host`, `user`, and `password`.  For example:
```text
realm=Sonatype Nexus Repository Manager
host=nexus-direct.scala-tools.org
user=admin
password=admin123
```

## Cross-publishing

To support multiple incompatible Scala versions, enable cross building and do `+ publish` (see [[Cross Build]]).  See [[Resolvers]] for other supported repository types.

## Published artifacts

By default, the main binary jar, a sources jar, and a API documentation jar are published.  You can declare other types of artifacts to publish and disable or modify the default artifacts.  See the [[Artifacts]] page for details.

## Modifying the generated POM

When `publish-maven-style` is `true`, a POM is generated by the `make-pom` action and published to the repository instead of an Ivy file.  This POM file may be altered by changing a few settings.  Set 'pom-extra' to provide XML (`scala.xml.NodeSeq`) to insert directly into the generated pom.  For example:
```scala
pomExtra :=
<licenses>
  <license>
    <name>Apache 2</name>
    <url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>
    <distribution>repo</distribution>
  </license>
</licenses>
```

`make-pom` adds to the POM any Maven-style repositories you have declared.  You can filter these by modifying `pom-repository-filter`, which by default excludes local repositories.  To instead only include local repositories:
```scala
pomIncludeRepository := { (repo: MavenRepository) => 
  repo.root.startsWith("file:")
}
```

There is also a `pom-post-process` setting that can be used to manipulate the final XML before it is written.  It's type is `Node => Node`.
```scala
pomPostProcess := { (node: Node) =>
	...
}
```